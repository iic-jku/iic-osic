% SPDX-FileCopyrightText: 2024 Harald Pretl, Johannes Kepler University, 
% Institute for Integrated Circuits
%
% Licensed under the Apache License, Version 2.0 (the "License");
% you may not use this file except in compliance with the License.
% You may obtain a copy of the License at
%
%      http://www.apache.org/licenses/LICENSE-2.0
%
% Unless required by applicable law or agreed to in writing, software
% distributed under the License is distributed on an "AS IS" BASIS,
% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
% See the License for the specific language governing permissions and
% limitations under the License.
% SPDX-License-Identifier: Apache-2.0

\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage[colorlinks=true]{hyperref}
\usepackage{parskip}
\author{Harald Pretl, Michael KÃ¶finger\\Institute for Integrated Circuits, Johannes Kepler University Linz}
\title{Simulation Cheatsheet}
\date{\copyright~2024}
\newcommand{\key}[1]{\texttt{\textbf{#1}}}
\newcommand{\mac}[1]{\texttt{#1}}
\newcommand{\argu}[1]{\textit{#1}}
\newcommand{\mouse}[1]{\texttt{#1}}
\begin{document}
	\maketitle
	
	This cheat sheet compiles basic simulation and measurement commands, as well a collection of useful code snippets for Ngspice and Xyce. In addition, bind keys and a summary of the mouse operations for Xschem are provieded as well. This compilation relates to Ngspice  42, Xyce 7.8 and Xschem 3.4.5, see:
	
	\url{https://ngspice.sourceforge.io/}\newline
	\url{https://xyce.sandia.gov/}\newline
	\url{http://repo.hu/projects/xschem/index.html}
	
	A comprehensive documentation and description of Ngspice, Xyce and Xschem can be found at:
	
	\url{https://ngspice.sourceforge.io/docs/ngspice-42-manual.pdf}\newline \url{https://xyce.sandia.gov/files/xyce/Xyce_Users_Guide_7.8.pdf}\newline \url{http://repo.hu/projects/xschem/xschem_man/xschem_man.html}
	
	\newpage
	
		\section*{Introductionary notes on Ngspice}
	Simulation based on the typical SPICE commands, which are preceded by a dot, is known in Ngspice as batch mode. In addition to this basic mode of operation, Ngspice does also offer a so called interactive mode with control file or control section, which allows to either process the results from batch mode, or use all the known simulation commands, measurement statements for scripting. Note that commands in the interactive mode are not preceded by a dot!
	Lastly, it should be noted, that Ngspice creates a so called \emph{plot} for every simulation run, e.\,g. \emph{op1, ac1, tran2}. These contain all the respective vectors. In case of a small-signal noise analysis, two plots are generated, the second \emph{plot} contains the integrated results. The inital plot is called \emph{const}. Vectors may be accessed across plots by adding <plotname>. infront of the vector.
	
	\begin{tabular}{lll}%{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{3}{l}{Simulation options:}\\
		Ngspice & Xyce & Comment\\
		\midrule
		.temp &&\\
		.IC &&set initial conditions\\
		.LIB &&include a library\\
		.INCLUDE&& include part of the netlist\\
		.OPTIONS&&\\
		.NODESET&&set initial conditions\\
		.PARAM&&define parameter\\
		.CSPARAM&--& define parameter(s), also available in control section\\
		.SAVE&&save simulation result vector\\
		.PROBE&&save device currents, voltages and differntial voltages\\
		\bottomrule
	\end{tabular}
	
	\newpage
	
	\begin{tabular}{lll}%{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{3}{l}{Analysis commands:}\\
		Ngspice & Xyce & Comment\\
		\midrule
		.OP&&operating point\\
		.DC&&\\
		.AC&&small-signal ac\\
		.NOISE&&small-signal noise\\
		.TF&&transfer function\\
		.PZ node1 node2 node3 node4 cur/vol pol/zer/pz &&Pole-zero\\
		.SP&&S parameter\\
		.TRAN&&transient\\
		.DISTO&&distortion\\
		.FOUR&&\\
		.PSS&&Periodic steady state \\
		.SENS&&sensitivity\\
		\bottomrule
	\end{tabular}
	
	\newpage
	
	\begin{tabular}{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{2}{l}{Measurement snippets (ngspice):}\\
		\midrule
		
		\bottomrule
	\end{tabular}
	
	\newpage
	
	\begin{tabular}{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{2}{l}{General commands (ngspice):}\\
		\midrule
		\mac{display} & print all vectors of the current plot\\
		\mac{set}	& print all plots and set variables\\
		\mac{show} & print all dc operating point model parameters for all device instances\\
		\mac{show} [\argu{<devicename>}] & print dc operating point model parameters of <devicename>\\
		\bottomrule
	\end{tabular}
	
	\newpage
	
	\begin{tabular}{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{2}{l}{Bind keys (Xschem):}\\
		\midrule
		\bottomrule
	\end{tabular}
	
	\newpage
	
	\begin{tabular}{p{0.3\textwidth}p{0.7\textwidth}}
		\toprule
		\multicolumn{2}{l}{Mouse operations (Xschem):}\\
		\midrule
		\bottomrule
	\end{tabular}

\end{document}
